<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Fit models across all specifications — specr • specr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Fit models across all specifications — specr"><meta property="og:description" content="Runs the specification/multiverse analysis across specified models.
This is the central function of the package and represent the second step
in the analytic framework implemented in the package specr. It estimates
and returns respective parameters and estimates of models that were specified
via setup()."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">specr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/specr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/01-different-specifications.html">Setting up different types of specifications</a>
    </li>
    <li>
      <a href="../articles/02-custom-plot.html">Visualizing specification curve analyses</a>
    </li>
    <li>
      <a href="../articles/03-parallelization.html">Using parallelization</a>
    </li>
    <li>
      <a href="../articles/04-measurement_models.html">Incorporating structural equation models</a>
    </li>
    <li>
      <a href="../articles/05-random_effects.html">Incorporating multilevel models</a>
    </li>
    <li>
      <a href="../articles/06-bayesian-models.html">Incorporating Bayesian Statistics</a>
    </li>
    <li>
      <a href="../articles/09-invest-spec.html">Investigating specific specifications</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/masurp/specr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fit models across all specifications</h1>
    <small class="dont-index">Source: <a href="https://github.com/masurp/specr/blob/HEAD/R/specr.R" class="external-link"><code>R/specr.R</code></a></small>
    <div class="hidden name"><code>specr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Runs the specification/multiverse analysis across specified models.
This is the central function of the package and represent the second step
in the analytic framework implemented in the package <code>specr</code>. It estimates
and returns respective parameters and estimates of models that were specified
via <code><a href="setup.html">setup()</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">specr</span><span class="op">(</span><span class="va">x</span>, data <span class="op">=</span> <span class="cn">NULL</span>, workers <span class="op">=</span> <span class="fu">availableCores</span><span class="op">(</span><span class="op">)</span>, <span class="va">...</span>, message <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A <code>specr.setup</code> object resulting from <code>setup</code> or a tibble that
contains the relevant specifications (e.g., a tibble resulting from
<code>as_tibble(setup(...))</code>).</p></dd>


<dt>data</dt>
<dd><p>If x is not an object of "specr.setup" and simply a tibble, you
need to provide the data set that should be used. Defaults to NULL as it is
assumend that most users will create an object of class "specr.setup" that they'll
pass to <code>specr()</code>.</p></dd>


<dt>workers</dt>
<dd><p>A numeric value that indicates how many cores should be used.
Defaults to <code>availableCores()</code> from the future package and thus uses
all available cores. Note: If the models specified via <code><a href="setup.html">setup()</a></code> are not
very computationally intensive, the overhead introduced trhough the parallelization
(setting up several workers and R sessions, etc.) may actually make the fitting
process slower. It only becomes considerably faster if the model fitting process
is so intensive that the overhead no longer matters. In other words, in a lot
of cases, setting <code>workers = 1</code> can be a meaningful choice.</p></dd>


<dt>...</dt>
<dd><p>Further arguments that can be passed to <code>future_pmap</code>. This only becomes
important if parallelization is used (workers &gt; 1) and a custom model function
is used. See examples 2 and 3 below for further details.</p></dd>


<dt>message</dt>
<dd><p>Logical value; indicates whether a short message should be
printed after the estimation including information about the elapsed time.
Defaults to TRUE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object of class <code>specr.object</code>, which includes a data frame
with all specifications their respective results along with many other useful
information about the model. Parameters are extracted via the function passed
to <code>setup</code>. By default this is <code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">broom::tidy()</a></code> and the function
<code><a href="https://generics.r-lib.org/reference/glance.html" class="external-link">broom::glance()</a></code>).Several other aspects and information are included in
the resulting class (e.g., number of specifications, time elapsed, subsets
included in the analyses). Use <code>methods(class = "specr.object")</code> for
an overview on available methods.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Empirical results are often contingent on analytical decisions that
are equally defensible, often arbitrary, and motivated by different reasons.
This decisions may introduce bias or at least variability. To this end,
specification curve analyses  (Simonsohn et al., 2019) or multiverse
analyses (Steegen et al., 2016) refer to identifying the set of
theoretically justified, statistically valid (and potentially also non-redundant
specifications, fitting the "multiverse" of models represented by these
specifications and estract relevant parameters often to display the results
graphically as a so-called specification curve. This allows readers to
identify consequential specifications decisions and how they affect the results
or parameter of interest.</p>
<p><b>Use of this function</b></p>
<p>A general overview is provided in the vignettes <code><a href="../articles/specr.html">vignette("specr")</a></code>.
Generally, you create relevant specification using the function <code><a href="setup.html">setup()</a></code>.
You then pass the resulting object of a class <code>specr.setup</code> to the
present function <code>specr()</code> to run the specification curve analysis.
Further note that the resulting object of class <code>specr.object</code> allows
to use several generic function such as <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> or <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>.
Use <code>methods(class = "specr.object")</code> for an overview on available
methods and e.g., <code><a href="plot.specr.object.html">?plot.specr.object</a></code> to view the dedicated help page.</p>
<p><b>Disclaimer</b></p>
<p>We do see a lot of value in investigating how analytical choices
affect a statistical outcome of interest. However, we strongly caution
against using specr as a tool to somehow arrive at a better estimate
compared to a single model. Running a specification curve analysis
does not make your findings any more reliable, valid or generalizable
than a single analysis. The method is meant to inform about the effects
of analytical choices on results, and not a better way to estimate a
correlation or effect.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    
<ul><li><p>Simonsohn, U., Simmons, J. P., &amp; Nelson, L. D. (2019). Specification
Curve: Descriptive and Inferential Statistics for all Plausible Specifications.
Available at: https://doi.org/10.2139/ssrn.2694998</p></li>
<li><p>Steegen, S., Tuerlinckx, F., Gelman, A., &amp; Vanpaemel, W. (2016).
Increasing Transparency Through a Multiverse Analysis. Perspectives on
Psychological Science, 11(5), 702-712. https://doi.org/10.1177/1745691616658637</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="setup.html">setup()</a></code> for the first step of setting up the specifications.</p>
<p><code><a href="summary.specr.object.html">summary.specr.object()</a></code> for how to summarize and inspect the results.</p>
<p><code><a href="plot.specr.object.html">plot.specr.object()</a></code> for plotting results.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Example 1 ----</span></span></span>
<span class="r-in"><span><span class="co"># Setup up typical specifications</span></span></span>
<span class="r-in"><span><span class="va">specs</span> <span class="op">&lt;-</span> <span class="fu"><a href="setup.html">setup</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">example_data</span>,            <span class="co"># providing data</span></span></span>
<span class="r-in"><span>               y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span><span class="op">)</span>,              <span class="co"># different y variables</span></span></span>
<span class="r-in"><span>               x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,              <span class="co"># different x variables</span></span></span>
<span class="r-in"><span>               model <span class="op">=</span> <span class="st">"lm"</span>,                   <span class="co"># only one model type</span></span></span>
<span class="r-in"><span>               <span class="fu"><a href="distinct.html">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group1</span><span class="op">)</span>, <span class="co"># subsets</span></span></span>
<span class="r-in"><span>               controls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span><span class="op">)</span><span class="op">)</span>       <span class="co"># Control these variables</span></span></span>
<span class="r-in"><span><span class="co"># Run analysis (not parallelized, using simple `map` functions)</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">specr</span><span class="op">(</span><span class="va">specs</span>, workers <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Models fitted based on 64 specifications</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cores used: 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.654 sec elapsed</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summary of the results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Results of the specification curve analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Technical details:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Class:                          specr.object -- version: 0.3.0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Cores used:                     1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Duration of fitting process:    0.654 sec elapsed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of specifications:       64 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Descriptive summary of the specification curve:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  median  mad   min  max   q25  q75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    0.13 0.41 -0.39 0.66 -0.14 0.39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Descriptive summary of sample sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  median min  max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   338.5 323 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Head of the specification results (first 6 rows): </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 25</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x     y     model controls subsets group1 formula estimate std.error statistic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> x1    y1    lm    1        middle  middle y1 ~ x…     0.61      0.07      9.28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> x1    y1    lm    1        old     old    y1 ~ x…     0.66      0.06     10.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> x1    y1    lm    1        young   young  y1 ~ x…     0.57      0.06     10.2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> x1    y1    lm    1        all     <span style="color: #BB0000;">NA</span>     y1 ~ x…     0.62      0.04     16.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> x1    y1    lm    c1       middle  middle y1 ~ x…     0.6       0.07      8.81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> x1    y1    lm    c1       old     old    y1 ~ x…     0.64      0.06      9.81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 15 more variables: p.value &lt;dbl&gt;, conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_r.squared &lt;dbl&gt;, fit_adj.r.squared &lt;dbl&gt;, fit_sigma &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_statistic &lt;dbl&gt;, fit_p.value &lt;dbl&gt;, fit_df &lt;dbl&gt;, fit_logLik &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_AIC &lt;dbl&gt;, fit_BIC &lt;dbl&gt;, fit_deviance &lt;dbl&gt;, fit_df.residual &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_nobs &lt;dbl&gt;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">results</span>, type <span class="op">=</span> <span class="st">"curve"</span>, <span class="va">subsets</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   subsets median   mad    min   max    q25   q75   obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> all      0.144 0.444 -<span style="color: #BB0000;">0.339</span> 0.620 -<span style="color: #BB0000;">0.132</span> 0.352  <span style="text-decoration: underline;">1</span>000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> middle   0.130 0.411 -<span style="color: #BB0000;">0.387</span> 0.613 -<span style="color: #BB0000;">0.108</span> 0.316   331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> old      0.204 0.506 -<span style="color: #BB0000;">0.304</span> 0.662 -<span style="color: #BB0000;">0.110</span> 0.418   323</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> young    0.101 0.375 -<span style="color: #BB0000;">0.310</span> 0.567 -<span style="color: #BB0000;">0.139</span> 0.287   346</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Example 2 ----</span></span></span>
<span class="r-in"><span><span class="co"># Setup up specifications with specific additions to the formula</span></span></span>
<span class="r-in"><span><span class="va">specs2</span> <span class="op">&lt;-</span> <span class="fu"><a href="setup.html">setup</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">example_data</span>,</span></span>
<span class="r-in"><span>                y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                model <span class="op">=</span> <span class="st">"lm"</span>,</span></span>
<span class="r-in"><span>                <span class="fu"><a href="distinct.html">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                <span class="fu"><a href="distinct.html">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                controls <span class="op">=</span> <span class="st">"c1"</span>,</span></span>
<span class="r-in"><span>                add_to_formula <span class="op">=</span> <span class="st">"c2"</span><span class="op">)</span> <span class="co"># Always control for `c2`</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run analysis using parallelization (2 cores and `future_pmap()`).</span></span></span>
<span class="r-in"><span><span class="co"># Because "lm" is a base function, no further arguments necessary</span></span></span>
<span class="r-in"><span><span class="va">results2</span> <span class="op">&lt;-</span> <span class="fu">specr</span><span class="op">(</span><span class="va">specs2</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Models fitted based on 96 specifications</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cores used: 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5.912 sec elapsed</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summary of results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">results2</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Results of the specification curve analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Technical details:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Class:                          specr.object -- version: 0.3.0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Cores used:                     2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Duration of fitting process:    5.912 sec elapsed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of specifications:       96 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Descriptive summary of the specification curve:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  median   mad    min   max    q25  q75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.137 0.394 -0.292 0.675 -0.042 0.44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Descriptive summary of sample sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  median min  max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     250 160 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Head of the specification results (first 6 rows): </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 26</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x     y     model controls subsets    group1 group2 formula estimate std.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> x1    y1    lm    1        middle &amp; … middle female y1 ~ x…    0.596     0.101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> x1    y1    lm    1        old &amp; fem… old    female y1 ~ x…    0.643     0.083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> x1    y1    lm    1        young &amp; f… young  female y1 ~ x…    0.48      0.082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> x1    y1    lm    1        female     <span style="color: #BB0000;">NA</span>     female y1 ~ x…    0.602     0.054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> x1    y1    lm    1        middle &amp; … middle male   y1 ~ x…    0.578     0.093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> x1    y1    lm    1        old &amp; male old    male   y1 ~ x…    0.675     0.1  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 16 more variables: statistic &lt;dbl&gt;, p.value &lt;dbl&gt;, conf.low &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   conf.high &lt;dbl&gt;, fit_r.squared &lt;dbl&gt;, fit_adj.r.squared &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_sigma &lt;dbl&gt;, fit_statistic &lt;dbl&gt;, fit_p.value &lt;dbl&gt;, fit_df &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_logLik &lt;dbl&gt;, fit_AIC &lt;dbl&gt;, fit_BIC &lt;dbl&gt;, fit_deviance &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_df.residual &lt;dbl&gt;, fit_nobs &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Example 3 ----</span></span></span>
<span class="r-in"><span><span class="co"># Create custom function</span></span></span>
<span class="r-in"><span><span class="va">glm2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">gaussian</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup specifications</span></span></span>
<span class="r-in"><span><span class="va">specs3</span> <span class="op">&lt;-</span> <span class="fu"><a href="setup.html">setup</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">example_data</span>,</span></span>
<span class="r-in"><span>                y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lm"</span>, <span class="st">"glm2"</span><span class="op">)</span>, <span class="co"># custom function added</span></span></span>
<span class="r-in"><span>                <span class="fu"><a href="distinct.html">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                <span class="fu"><a href="distinct.html">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                controls <span class="op">=</span> <span class="st">"c1"</span>,</span></span>
<span class="r-in"><span>                add_to_formula <span class="op">=</span> <span class="st">"c2"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Because "glm2" is a custom function, we need to provide `furrr_options`</span></span></span>
<span class="r-in"><span><span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span>globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>glm2 <span class="op">=</span> <span class="va">glm2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run analysis using parallelization (4 cores and `future_pmap`).</span></span></span>
<span class="r-in"><span><span class="va">results3</span> <span class="op">&lt;-</span> <span class="fu">specr</span><span class="op">(</span><span class="va">specs3</span>,</span></span>
<span class="r-in"><span>                  workers <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>                  .options <span class="op">=</span> <span class="va">opts</span><span class="op">)</span> <span class="co"># Options passed to to `future_pmap()`</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Models fitted based on 192 specifications</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cores used: 4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10.975 sec elapsed</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summary of results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">results3</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Results of the specification curve analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Technical details:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Class:                          specr.object -- version: 0.3.0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Cores used:                     4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Duration of fitting process:    10.975 sec elapsed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Number of specifications:       192 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Descriptive summary of the specification curve:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  median   mad    min   max    q25  q75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.137 0.394 -0.292 0.675 -0.042 0.44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Descriptive summary of sample sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  median min  max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     250 160 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Head of the specification results (first 6 rows): </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 28</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x     y     model controls subsets    group1 group2 formula estimate std.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> x1    y1    lm    1        middle &amp; … middle female y1 ~ x…    0.596     0.101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> x1    y1    lm    1        old &amp; fem… old    female y1 ~ x…    0.643     0.083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> x1    y1    lm    1        young &amp; f… young  female y1 ~ x…    0.48      0.082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> x1    y1    lm    1        female     <span style="color: #BB0000;">NA</span>     female y1 ~ x…    0.602     0.054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> x1    y1    lm    1        middle &amp; … middle male   y1 ~ x…    0.578     0.093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> x1    y1    lm    1        old &amp; male old    male   y1 ~ x…    0.675     0.1  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 18 more variables: statistic &lt;dbl&gt;, p.value &lt;dbl&gt;, conf.low &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   conf.high &lt;dbl&gt;, fit_r.squared &lt;dbl&gt;, fit_adj.r.squared &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_sigma &lt;dbl&gt;, fit_statistic &lt;dbl&gt;, fit_p.value &lt;dbl&gt;, fit_df &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_logLik &lt;dbl&gt;, fit_AIC &lt;dbl&gt;, fit_BIC &lt;dbl&gt;, fit_deviance &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_df.residual &lt;dbl&gt;, fit_nobs &lt;dbl&gt;, fit_null.deviance &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   fit_df.null &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Philipp K. Masur, Michael Scharkow.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

