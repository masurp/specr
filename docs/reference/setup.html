<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Specifying analytical decisions in a specification setup — setup • specr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Specifying analytical decisions in a specification setup — setup"><meta property="og:description" content="Creates all possible specifications as a combination of
different dependent and independent variables, model types, control
variables, potential subset analyses, as well as potentially other
analytic choices. This function represents the first step in the
analytic framework implemented in the package specr. The resulting
class specr.setup then needs to be passed to the core function of
the package called specr(), which fits the specified models across
all specifications."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">specr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/specr.html">Getting started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Basics</li>
    <li>
      <a href="../articles/different-specifications.html">Setting up different types of specifications</a>
    </li>
    <li>
      <a href="../articles/custom-plot.html">Visualizing specification curve analyses</a>
    </li>
    <li>
      <a href="../articles/invest-spec.html">Investigating specific specifications</a>
    </li>
    <li>
      <a href="../articles/parallelization.html">Parallelization</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Incorporating specific models</li>
    <li>
      <a href="../articles/measurement_models.html">Structural equation models</a>
    </li>
    <li>
      <a href="../articles/random_effects.html">Multilevel models</a>
    </li>
    <li>
      <a href="../articles/bayesian-models.html">Bayesian Modeling</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/masurp/specr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Specifying analytical decisions in a specification setup</h1>
    <small class="dont-index">Source: <a href="https://github.com/masurp/specr/blob/HEAD/R/setup.R" class="external-link"><code>R/setup.R</code></a></small>
    <div class="hidden name"><code>setup.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates all possible specifications as a combination of
different dependent and independent variables, model types, control
variables, potential subset analyses, as well as potentially other
analytic choices. This function represents the first step in the
analytic framework implemented in the package <code>specr</code>. The resulting
class <code>specr.setup</code> then needs to be passed to the core function of
the package called <code><a href="specr.html">specr()</a></code>, which fits the specified models across
all specifications.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">setup</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  controls <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_to_formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fun1 <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">x</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  fun2 <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/glance.html" class="external-link">glance</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>  simplify <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>The data set that should be used for the analysis</p></dd>


<dt>x</dt>
<dd><p>A vector denoting independent variables</p></dd>


<dt>y</dt>
<dd><p>A vector denoting the dependent variables</p></dd>


<dt>model</dt>
<dd><p>A vector denoting the model(s) that should be estimated.</p></dd>


<dt>...</dt>
<dd><p>Specification of potential subsets/groups. As the subsetting
variable should be in the data set, please specify as follows
(<code>distinct(data, variable)</code>). Note: This variable needs to be a numeric
(<code>&lt;dbl&gt;</code> or <code>&lt;int&gt;</code>) or a character (<code>&lt;chr&gt;</code>) variable in the the data set!
It will not work with a factor (<code>&lt;fct&gt;</code>) variable. If your grouping variable
is a factor, please recode to a character variable beforehand. See also
examples further below.</p></dd>


<dt>controls</dt>
<dd><p>A vector of the control variables that should be included.
Defaults to NULL.</p></dd>


<dt>add_to_formula</dt>
<dd><p>A string specifying aspects that should always be
included in the formula (e.g. a constant covariate, random effect structures...)</p></dd>


<dt>fun1</dt>
<dd><p>A function that extracts the parameters of interest from the
fitted models. Defaults to <a href="https://broom.tidymodels.org/reference/broom.html" class="external-link">tidy</a>, which works
with a large range of different models.</p></dd>


<dt>fun2</dt>
<dd><p>A function that extracts fit indices of interest from the models.
Defaults to <a href="https://broom.tidymodels.org/reference/broom.html" class="external-link">glance</a>, which works with a large range of
different models. Note: Different models result in different fit indices. Thus,
if you use different models within one specification curve analysis, this may not
work. In this case, you can simply set <code>fun2 = NULL</code> to not extract any fit indices.</p></dd>


<dt>simplify</dt>
<dd><p>Logical value indicating what type of combinations between
control variables should be included in the specification. If FALSE (default),
all combinations between the provided variables are created (none, each
individually, each combination between each variable, all variables). If
TRUE, only no covariates, each individually, and all covariates are included
as specifications (akin to the default in specr version 0.2.1).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object of class <code>specr.setup</code> which includes all possible
specifications based on combinations of the analytic choices. The
resulting list includes a specification tibble, the data set, and additional
information about the universe of specifications. Use
<code>methods(class = "specr.setup")</code> for an overview on available methods.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Empirical results are often contingent on analytical decisions that
are equally defensible, often arbitrary, and motivated by different reasons.
This decisions may introduce bias or at least variability. To this end,
specification curve analyses  (Simonsohn et al., 2020) or multiverse
analyses (Steegen et al., 2016) refer to identifying the set of
theoretically justified, statistically valid (and potentially also non-redundant
specifications, fitting the "multiverse" of models represented by these
specifications and extract relevant parameters often to display the results
graphically as a so-called specification curve. This allows readers to
identify consequential specifications decisions and how they affect the results
or parameter of interest.</p>
<p><b>Use of this function</b></p>
<p>A general overview is provided in the vignettes <code><a href="../articles/specr.html">vignette("specr")</a></code>.
It is assumed that you want to estimate the relationship between two variables
(<code>x</code> and <code>y</code>). What varies may be what variables should be used for
<code>x</code> and <code>y</code>, what model should be used to estimate the relationship,
whether the relationship should be estimated for certain subsets, and whether
different combinations of control variables should be included. This
allows to (re)produce almost any analytical decision imaginable. See examples
below for how a number of typical analytical decision can be implemented.
Afterwards you pass the resulting object of a class <code>specr.setup</code> to the
function <code><a href="specr.html">specr()</a></code> to run the specification curve analysis.</p>
<p>Note, the resulting class of <code>specr.setup</code> allows to use generic functions.
Use <code>methods(class = "specr.setup")</code> for an overview on available methods and
e.g., <code><a href="summary.specr.setup.html">?summary.specr.setup</a></code> to view the dedicated help page.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    
<ul><li><p>Simonsohn, U., Simmons, J.P. &amp; Nelson, L.D. (2020). Specification curve analysis. <em>Nature Human Behaviour, 4</em>, 1208–1214. https://doi.org/10.1038/s41562-020-0912-z</p></li>
<li><p>Steegen, S., Tuerlinckx, F., Gelman, A., &amp; Vanpaemel, W. (2016). Increasing Transparency Through a Multiverse Analysis. <em>Perspectives on Psychological Science, 11</em>(5), 702-712. https://doi.org/10.1177/1745691616658637</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="specr.html">specr()</a></code> for the second step of actually running the actual specification curve analysis</p>
<p><code><a href="summary.specr.setup.html">summary.specr.setup()</a></code> for how to summarize and inspect the resulting specifications</p>
<p><code><a href="plot.specr.setup.html">plot.specr.setup()</a></code> for creating a visual summary of the specification setup.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Example 1 ----</span></span></span>
<span class="r-in"><span><span class="co"># Setting up typical specifications</span></span></span>
<span class="r-in"><span><span class="va">specs</span> <span class="op">&lt;-</span> <span class="fu">setup</span><span class="op">(</span>data <span class="op">=</span> <span class="va">example_data</span>,             <span class="co"># data to be used</span></span></span>
<span class="r-in"><span>               x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,               <span class="co"># independent variables</span></span></span>
<span class="r-in"><span>               y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span><span class="op">)</span>,               <span class="co"># dependent variables</span></span></span>
<span class="r-in"><span>               model <span class="op">=</span> <span class="st">"lm"</span>,                    <span class="co"># model estimation function</span></span></span>
<span class="r-in"><span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group1</span><span class="op">)</span>,  <span class="co"># first grouping variable for subsets</span></span></span>
<span class="r-in"><span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group2</span><span class="op">)</span>,  <span class="co"># second grouping variable for subsets</span></span></span>
<span class="r-in"><span>               controls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span>, <span class="st">"c3"</span><span class="op">)</span>,  <span class="co"># control variables</span></span></span>
<span class="r-in"><span>               simplify <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>                 <span class="co"># limited combinations of controls</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check specifications</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">specs</span>, rows <span class="op">=</span> <span class="fl">18</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Setup for the Specification Curve Analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Class:                      specr.setup -- version: 1.0.0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of specifications:   240 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Specifications:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Independent variable:     x1, x2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Dependent variable:       y1, y2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Models:                   lm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Covariates:               no covariates, c1, c2, c3, all covariates </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Subsets analyses:         middle &amp; female, old &amp; female, young &amp; female, female, middle &amp; male, old &amp; male, young &amp; male, male, middle, old, young, all </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Function used to extract parameters:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   function (x) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> broom::tidy(x, conf.int = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x7f821a93beb0&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Head of specifications table (first 18 rows):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 18 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x     y     model controls      subsets         group1 group2 formula     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> x1    y1    lm    no covariates middle &amp; female middle female y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> x1    y1    lm    no covariates old &amp; female    old    female y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> x1    y1    lm    no covariates young &amp; female  young  female y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> x1    y1    lm    no covariates female          <span style="color: #BB0000;">NA</span>     female y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> x1    y1    lm    no covariates middle &amp; male   middle male   y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> x1    y1    lm    no covariates old &amp; male      old    male   y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> x1    y1    lm    no covariates young &amp; male    young  male   y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> x1    y1    lm    no covariates male            <span style="color: #BB0000;">NA</span>     male   y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> x1    y1    lm    no covariates middle          middle <span style="color: #BB0000;">NA</span>     y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> x1    y1    lm    no covariates old             old    <span style="color: #BB0000;">NA</span>     y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> x1    y1    lm    no covariates young           young  <span style="color: #BB0000;">NA</span>     y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> x1    y1    lm    no covariates all             <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>     y1 ~ x1 + 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> x1    y1    lm    c1            middle &amp; female middle female y1 ~ x1 + c1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> x1    y1    lm    c1            old &amp; female    old    female y1 ~ x1 + c1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> x1    y1    lm    c1            young &amp; female  young  female y1 ~ x1 + c1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> x1    y1    lm    c1            female          <span style="color: #BB0000;">NA</span>     female y1 ~ x1 + c1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> x1    y1    lm    c1            middle &amp; male   middle male   y1 ~ x1 + c1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> x1    y1    lm    c1            old &amp; male      old    male   y1 ~ x1 + c1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Example 2 ----</span></span></span>
<span class="r-in"><span><span class="co"># Setting up specifications for multilevel models</span></span></span>
<span class="r-in"><span><span class="va">specs</span> <span class="op">&lt;-</span> <span class="fu">setup</span><span class="op">(</span>data <span class="op">=</span> <span class="va">example_data</span>,</span></span>
<span class="r-in"><span>               x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lmer"</span><span class="op">)</span>,               <span class="co"># multilevel model</span></span></span>
<span class="r-in"><span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               controls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               add_to_formula <span class="op">=</span> <span class="st">"(1|group2)"</span><span class="op">)</span>   <span class="co"># random effect in all models</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check specifications</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">specs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Setup for the Specification Curve Analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Class:                      specr.setup -- version: 1.0.0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of specifications:   64 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Specifications:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Independent variable:     x1, x2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Dependent variable:       y1, y2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Models:                   lmer </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Covariates:               no covariates, c1, c2, c1 + c2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Subsets analyses:         middle, old, young, all </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Function used to extract parameters:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   function (x) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> broom::tidy(x, conf.int = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x7f824091fc20&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Head of specifications table (first 6 rows):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x     y     model controls      subsets group1 formula                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> x1    y1    lmer  no covariates middle  middle y1 ~ x1 + 1 + (1|group2) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> x1    y1    lmer  no covariates old     old    y1 ~ x1 + 1 + (1|group2) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> x1    y1    lmer  no covariates young   young  y1 ~ x1 + 1 + (1|group2) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> x1    y1    lmer  no covariates all     <span style="color: #BB0000;">NA</span>     y1 ~ x1 + 1 + (1|group2) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> x1    y1    lmer  c1            middle  middle y1 ~ x1 + c1 + (1|group2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> x1    y1    lmer  c1            old     old    y1 ~ x1 + c1 + (1|group2)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Example 3 ----</span></span></span>
<span class="r-in"><span><span class="co"># Setting up specifications with a different parameter extract functions</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create custom extract function to extract different parameter and model</span></span></span>
<span class="r-in"><span><span class="va">tidy_99</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">x</span>,</span></span>
<span class="r-in"><span>     conf.int <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>     conf.level <span class="op">=</span> <span class="fl">.99</span><span class="op">)</span>         <span class="co"># different alpha error rate</span></span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">full_model</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>     <span class="co"># include entire model fit object as list</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup specs</span></span></span>
<span class="r-in"><span><span class="va">specs</span> <span class="op">&lt;-</span> <span class="fu">setup</span><span class="op">(</span>data <span class="op">=</span> <span class="va">example_data</span>,</span></span>
<span class="r-in"><span>               x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               model <span class="op">=</span> <span class="st">"lm"</span>,</span></span>
<span class="r-in"><span>               fun1 <span class="op">=</span> <span class="va">tidy_99</span>,             <span class="co"># pass new function to setup</span></span></span>
<span class="r-in"><span>               add_to_formula <span class="op">=</span> <span class="st">"c1 + c2"</span><span class="op">)</span> <span class="co"># set of covariates in all models</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check specifications</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">specs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Setup for the Specification Curve Analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Class:                      specr.setup -- version: 1.0.0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of specifications:   4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Specifications:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Independent variable:     x1, x2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Dependent variable:       y1, y2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Models:                   lm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Covariates:               no covariates </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Subsets analyses:         all </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Function used to extract parameters:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   function(x) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fit &lt;- broom::tidy(x,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      conf.int = TRUE,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      conf.level = .99)         # different alpha error rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fit$full_model = list(x)     # include entire model fit object as list</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   return(fit)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x7f821a88f548&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Head of specifications table (first 6 rows):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x     y     model controls      subsets formula              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> x1    y1    lm    no covariates all     y1 ~ x1 + 1 + c1 + c2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> x1    y2    lm    no covariates all     y2 ~ x1 + 1 + c1 + c2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> x2    y1    lm    no covariates all     y1 ~ x2 + 1 + c1 + c2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> x2    y2    lm    no covariates all     y2 ~ x2 + 1 + c1 + c2</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Philipp K. Masur, Michael Scharkow.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

