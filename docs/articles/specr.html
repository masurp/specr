<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An introduction to specr • specr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="An introduction to specr">
<meta property="og:description" content="specr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">specr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/specr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/custom-plot.html">Customizing plots</a>
    </li>
    <li>
      <a href="../articles/decompose_var.html">Identifying variance components</a>
    </li>
    <li>
      <a href="../articles/invest-spec.html">Investigating specific specifications</a>
    </li>
    <li>
      <a href="../articles/measurement_models.html">Including latent measurement models</a>
    </li>
    <li>
      <a href="../articles/progress.html">Visualizing progress</a>
    </li>
    <li>
      <a href="../articles/random_effects.html">Including random effects</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/masurp/specr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="specr_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>An introduction to specr</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/masurp/specr/blob/master/vignettes/specr.rmd"><code>vignettes/specr.rmd</code></a></small>
      <div class="hidden name"><code>specr.rmd</code></div>

    </div>

    
    
<p>The following vignette is a more comprehensive version of the example on the homepage and exemplifies how to use the major functions of this package. Although using <code>specr</code> strictly speaking does not require any other package, we recommend to also load the <code>tidyverse</code> as it provides valuable functions for data wrangling and adapting outputs from <code>specr</code> functions. Furthermore, the <code>tidyverse</code> includes <code>ggplot2</code> which can be used to modify the layout of the plots.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co"># Load libraries</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://masurp.github.io/specr/">specr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></pre></div>
<div id="check-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#check-the-data" class="anchor"></a>1. Check the data</h2>
<p>In order to understand what type of analytical choices exists, you need to understand your data set. In a first step, you should hence investigate your data closely.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co"># We have a look at the simulated data set that is included in the package</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">)</span>
<span class="co">#&gt;         x1         x2         c1        c2        y1         y2 group1 group2</span>
<span class="co">#&gt; 1 1.533913  1.3697122  0.5424902 3.8924435 23.500543 10.4269278      0      A</span>
<span class="co">#&gt; 2 1.680639  1.5163745 -1.2415868 3.3377268 17.017955  0.5733467      1      C</span>
<span class="co">#&gt; 3 1.223941 -0.2381044  0.1405891 0.8911959 -3.678272  4.2303190      0      B</span>
<span class="co">#&gt; 4 1.765276  0.9524049  4.0397943 1.8567454 21.668684 14.8865252      1      B</span>
<span class="co">#&gt; 5 1.907134  0.6282816  3.1002518 5.5840574 32.713106 20.5251920      0      A</span>
<span class="co">#&gt; 6 1.710695  1.1898467  0.4648824 4.0239483 20.422171  4.3471236      1      C</span>

<span class="co"># Summary of the data set</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">)</span>
<span class="co">#&gt;        x1               x2                c1               c2        </span>
<span class="co">#&gt;  Min.   :-1.185   Min.   :-1.6037   Min.   :-4.093   Min.   :-3.780  </span>
<span class="co">#&gt;  1st Qu.: 1.823   1st Qu.: 0.5248   1st Qu.: 1.242   1st Qu.: 1.282  </span>
<span class="co">#&gt;  Median : 2.479   Median : 1.2740   Median : 2.513   Median : 2.775  </span>
<span class="co">#&gt;  Mean   : 2.455   Mean   : 1.2999   Mean   : 2.499   Mean   : 2.690  </span>
<span class="co">#&gt;  3rd Qu.: 3.192   3rd Qu.: 2.1049   3rd Qu.: 3.897   3rd Qu.: 4.064  </span>
<span class="co">#&gt;  Max.   : 5.576   Max.   : 4.5741   Max.   : 7.994   Max.   : 9.001  </span>
<span class="co">#&gt;        y1               y2              group1    group2 </span>
<span class="co">#&gt;  Min.   :-22.93   Min.   :-22.148   Min.   :0.0   A:144  </span>
<span class="co">#&gt;  1st Qu.: 12.50   1st Qu.:  3.944   1st Qu.:0.0   B:162  </span>
<span class="co">#&gt;  Median : 21.69   Median : 11.753   Median :0.5   C:194  </span>
<span class="co">#&gt;  Mean   : 23.89   Mean   : 11.200   Mean   :0.5          </span>
<span class="co">#&gt;  3rd Qu.: 34.04   3rd Qu.: 17.966   3rd Qu.:1.0          </span>
<span class="co">#&gt;  Max.   : 94.13   Max.   : 46.341   Max.   :1.0</span></pre></div>
<p>There are several numeric variables. In this example, we assume that <code>x</code> represents independent variables, <code>y</code> represents dependent variables, <code>c</code> represents control variables, and <code>group</code> denotes potential grouping variables that can be used for subsetting the data.</p>
</div>
<div id="define-analytical-choices" class="section level2">
<h2 class="hasAnchor">
<a href="#define-analytical-choices" class="anchor"></a>2. Define analytical choices</h2>
<p>The next steps involves identifying possible analytical choices. This step involves an in-depth understanding of the research question and the model(s) that will be specified. In this case, we assume simply that <code>x</code> should be positively correlated with <code>y</code>. We can use the additional function <code><a href="../reference/setup_specs.html">setup_specs()</a></code> to check how different analytical decisions create varying factorial designs.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="../reference/setup_specs.html">setup_specs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"y1"</span><span class="op">)</span>,               <span class="co"># We choose only one dependent variale</span>
            x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,         <span class="co"># We are not sure which independent variable is better</span>
            model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"lm"</span><span class="op">)</span>,           <span class="co"># We only estimate one type of model (linear model)</span>
            controls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span><span class="op">)</span><span class="op">)</span>  <span class="co"># We include two control variable </span>
<span class="co">#&gt; # A tibble: 8 x 4</span>
<span class="co">#&gt;   x     y     model controls     </span>
<span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;        </span>
<span class="co">#&gt; 1 x1    y1    lm    c1 + c2      </span>
<span class="co">#&gt; 2 x2    y1    lm    c1 + c2      </span>
<span class="co">#&gt; 3 x1    y1    lm    c1           </span>
<span class="co">#&gt; 4 x2    y1    lm    c1           </span>
<span class="co">#&gt; 5 x1    y1    lm    c2           </span>
<span class="co">#&gt; 6 x2    y1    lm    c2           </span>
<span class="co">#&gt; 7 x1    y1    lm    no covariates</span>
<span class="co">#&gt; 8 x2    y1    lm    no covariates</span></pre></div>
<p>The resulting data frame creates eight different specifications. <code><a href="../reference/setup_specs.html">setup_specs()</a></code> can be used to check and understand how different analytical choices create specific combinations. Yet, this step is not mandatory. This helper function is used within the next function <code><a href="../reference/run_specs.html">run_specs()</a></code> that actually runs the specification analysis.</p>
</div>
<div id="define-final-analytical-choices-and-run-the-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#define-final-analytical-choices-and-run-the-analysis" class="anchor"></a>3. Define final analytical choices and run the analysis</h2>
<p>The main function of the package is <code><a href="../reference/run_specs.html">run_specs()</a></code>. We need to include our analytical choices as arguments (as they will be passed to <code><a href="../reference/setup_specs.html">setup_specs()</a></code>.) Additionally, we need to provide the data and, if needed, we can also specify subsets that should be evaluated.</p>
<p>One type of analytical choice that could additionally affect the results refers to the type of model that is estimated. The function runs traditional linear regression models by default (i.e. when <code>model = "lm"</code> is provided as argument). However, customized model functions can be passed to the function, too. The only requirement is that the customized function has <code>formula</code> and <code>data</code> as argument names. The self-made function needs to be a model estimation function, that takes the formula and estimates the model based on the data. In <code><a href="../reference/run_specs.html">run_specs()</a></code>, the resulting object is passed to <code><a href="https://rdrr.io/pkg/generics/man/tidy.html">broom::tidy()</a></code>, which can deal with a variety of model classes.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="co"># specific model fitting function</span>
<span class="va">lm_gauss</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">formula</span>, 
      data <span class="op">=</span> <span class="va">data</span>, 
      family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">gaussian</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Run specification curve analysis</span>
<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_specs.html">run_specs</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">example_data</span>, 
                     y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span><span class="op">)</span>, 
                     x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>, 
                     model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"lm"</span>, <span class="st">"lm_gauss"</span><span class="op">)</span>, 
                     controls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span><span class="op">)</span>, 
                     subsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>group1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">$</span><span class="va">group1</span><span class="op">)</span>,
                                    group2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">$</span><span class="va">group2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Check</span>
<span class="va">results</span>
<span class="co">#&gt; # A tibble: 384 x 25</span>
<span class="co">#&gt;    x     y     model controls estimate std.error statistic  p.value conf.low</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1 x1    y1    lm    c1 + c2     4.95      0.525     9.43  3.11e-18    3.92 </span>
<span class="co">#&gt;  2 x2    y1    lm    c1 + c2     6.83      0.321    21.3   1.20e-57    6.20 </span>
<span class="co">#&gt;  3 x1    y2    lm    c1 + c2    -0.227     0.373    -0.607 5.44e- 1   -0.961</span>
<span class="co">#&gt;  4 x2    y2    lm    c1 + c2     0.985     0.324     3.04  2.62e- 3    0.347</span>
<span class="co">#&gt;  5 x1    y1    lm_g… c1 + c2     4.95      0.525     9.43  3.11e-18    3.92 </span>
<span class="co">#&gt;  6 x2    y1    lm_g… c1 + c2     6.83      0.321    21.3   1.20e-57    6.20 </span>
<span class="co">#&gt;  7 x1    y2    lm_g… c1 + c2    -0.227     0.373    -0.607 5.44e- 1   -0.958</span>
<span class="co">#&gt;  8 x2    y2    lm_g… c1 + c2     0.985     0.324     3.04  2.62e- 3    0.350</span>
<span class="co">#&gt;  9 x1    y1    lm    c1          5.53      0.794     6.97  2.95e-11    3.96 </span>
<span class="co">#&gt; 10 x2    y1    lm    c1          8.07      0.557    14.5   6.90e-35    6.98 </span>
<span class="co">#&gt; # … with 374 more rows, and 16 more variables: conf.high &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fit_r.squared &lt;dbl&gt;, fit_adj.r.squared &lt;dbl&gt;, fit_sigma &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fit_statistic &lt;dbl&gt;, fit_p.value &lt;dbl&gt;, fit_df &lt;dbl&gt;, fit_logLik &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fit_AIC &lt;dbl&gt;, fit_BIC &lt;dbl&gt;, fit_deviance &lt;dbl&gt;, fit_df.residual &lt;int&gt;,</span>
<span class="co">#&gt; #   fit_nobs &lt;int&gt;, fit_null.deviance &lt;dbl&gt;, fit_df.null &lt;int&gt;, subsets &lt;chr&gt;</span></pre></div>
<p>The resulting data frame includes relevant statistics for each of the estimated models.</p>
<p>We can now plot a simple decision tree to understand how our analytical choices lead to a large number of specifications.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu"><a href="../reference/plot_decisiontree.html">plot_decisiontree</a></span><span class="op">(</span><span class="va">results</span>, 
                  legend <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></pre></div>
<p><img src="specr_files/figure-html/unnamed-chunk-6-1.png" width="100%"></p>
</div>
<div id="investigate-the-specification-curve" class="section level2">
<h2 class="hasAnchor">
<a href="#investigate-the-specification-curve" class="anchor"></a>4. Investigate the specification curve</h2>
<p>The package includes a simple function <code><a href="../reference/summarise_specs.html">summarise_specs()</a></code> that allows to get a first summary of the results.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="co"># basic summary of the entire specification curve</span>
<span class="fu"><a href="../reference/summarise_specs.html">summarise_specs</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 7</span>
<span class="co">#&gt;   median   mad   min   max   q25   q75   obs</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1   3.59  4.56 -2.05  9.58  1.03  7.63   123</span>

<span class="co"># summary by specific groups and  statistics</span>
<span class="fu"><a href="../reference/summarise_specs.html">summarise_specs</a></span><span class="op">(</span><span class="va">results</span>,                         <span class="co"># result data frame</span>
                <span class="va">x</span>, <span class="va">y</span>,                            <span class="co"># grouping variables</span>
                stats <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/lst.html">lst</a></span><span class="op">(</span><span class="va">median</span>, <span class="va">min</span>, <span class="va">max</span><span class="op">)</span><span class="op">)</span>   <span class="co"># specific functions</span>
<span class="co">#&gt; # A tibble: 4 x 6</span>
<span class="co">#&gt; # Groups:   x [2]</span>
<span class="co">#&gt;   x     y     median    min   max   obs</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 x1    y1     6.52   3.49   9.28   123</span>
<span class="co">#&gt; 2 x1    y2     0.498 -2.05   3.67   123</span>
<span class="co">#&gt; 3 x2    y1     7.80   5.89   9.58   123</span>
<span class="co">#&gt; 4 x2    y2     1.29  -0.258  2.91   123</span>

<span class="co"># summary of another statistic</span>
<span class="fu"><a href="../reference/summarise_specs.html">summarise_specs</a></span><span class="op">(</span><span class="va">results</span>, 
                <span class="va">subsets</span>,
                var <span class="op">=</span> <span class="va">p.value</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 12 x 8</span>
<span class="co">#&gt;    subsets              median       mad      min    max      q25      q75   obs</span>
<span class="co">#&gt;    &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 all                 1.84e-6   2.72e-6 5.08e-89 0.838  6.48e-40  6.31e-2   500</span>
<span class="co">#&gt;  2 group1 = 0          2.86e-5   4.24e-5 1.20e-57 0.994  2.33e-18  2.59e-1   250</span>
<span class="co">#&gt;  3 group1 = 0 &amp; gr…    1.07e-3   1.59e-3 6.98e-16 0.577  2.35e- 5  4.95e-3    72</span>
<span class="co">#&gt;  4 group1 = 0 &amp; gr…    7.86e-4   1.17e-3 2.53e-21 0.930  2.43e- 9  1.23e-1    76</span>
<span class="co">#&gt;  5 group1 = 0 &amp; gr…    1.03e-3   1.53e-3 2.05e-22 0.572  2.37e- 8  6.66e-2   102</span>
<span class="co">#&gt;  6 group1 = 1          2.51e-5   3.71e-5 6.96e-46 0.749  3.52e-19  7.36e-2   250</span>
<span class="co">#&gt;  7 group1 = 1 &amp; gr…    7.83e-5   1.16e-4 9.73e-17 0.0395 7.35e- 7  1.58e-3    72</span>
<span class="co">#&gt;  8 group1 = 1 &amp; gr…    9.59e-5   1.42e-4 1.51e-15 0.277  1.32e- 9  7.74e-2    86</span>
<span class="co">#&gt;  9 group1 = 1 &amp; gr…    7.58e-6   1.12e-5 3.86e-18 0.862  1.75e- 8  1.78e-1    92</span>
<span class="co">#&gt; 10 group2 = A          3.28e-8   4.86e-8 5.64e-30 0.0245 9.45e-11  9.52e-6   144</span>
<span class="co">#&gt; 11 group2 = B          2.87e-5   4.25e-5 2.05e-28 0.231  1.13e-15  8.32e-3   162</span>
<span class="co">#&gt; 12 group2 = C          3.03e-7   4.49e-7 2.45e-35 0.487  1.07e-15  3.48e-2   194</span></pre></div>
<p>The output contains summary statistics such as the median, the median absolute deviation, … as well as the number of observations that were used for each model. Bear in mind that due to subsetting or missing data, sample sizes can vary considerably which, in turn, affects the results (e.g., the p-value).</p>
<p>However, in order to grasp how the different analytical choices affect the outcome of interest (in this case, the estimate refers to the unstandardized regression coefficient <em>b</em>), it is reasonable to plot a specification curve. The function <code><a href="../reference/plot_specs.html">plot_specs()</a></code> to produces the typical visualization of the specification curve and how the analytical choices affected the obtained results.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="co"># Plot specification curve analysis</span>
<span class="fu"><a href="../reference/plot_specs.html">plot_specs</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></pre></div>
<p><img src="specr_files/figure-html/unnamed-chunk-8-1.png" width="100%"></p>
<p>The resulting plot includes the ranked specification curve (A) and an overview about how the different analytical choices affect the estimate of interest (B). Red represents negative and significant effects (based on the chosen significance level, by default <span class="math inline">\(\alpha = .05\)</span>). Blue represents positive and significant effects. Grey refers to non-significant effects.</p>
<p>Sometimes, it can be useful to check the influence of specific choices on the estimate of interest more precisely. We can use the function <code><a href="../reference/plot_summary.html">plot_summary()</a></code> to produce respective boxplots.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="../reference/plot_summary.html">plot_summary</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></pre></div>
<p><img src="specr_files/figure-html/unnamed-chunk-9-1.png" width="100%"></p>
<p>We can see that the dependent variable (<code>y</code>) produces the largest differences in the obtained estimates.</p>
</div>
<div id="decompose-the-variance-in-the-specification-curve" class="section level2">
<h2 class="hasAnchor">
<a href="#decompose-the-variance-in-the-specification-curve" class="anchor"></a>5. Decompose the variance in the specification curve</h2>
<p>Finally, we can estimate how much variance in the specification curve is related to which analytical decisions. Therefore, we have to estimate a basic multilevel model without predictors and the analytical decisions as random effects (interactions could be included too). We then use the function <code><a href="../reference/icc_specs.html">icc_specs()</a></code> to calculate a respective table or <code><a href="../reference/plot_variance.html">plot_variance()</a></code> to visualize the distribution.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="co"># Estimate multilevel model </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lme4/lme4/">lme4</a></span><span class="op">)</span>
<span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lme4/man/lmer.html">lmer</a></span><span class="op">(</span><span class="va">estimate</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">x</span><span class="op">)</span>  <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">y</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">controls</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">subsets</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">results</span><span class="op">)</span>

<span class="co"># Get intra-class correlation</span>
<span class="fu"><a href="../reference/icc_specs.html">icc_specs</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_if</a></span><span class="op">(</span><span class="va">is.numeric</span>, <span class="va">round</span>, <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt;        grp  vcov  icc percent</span>
<span class="co">#&gt; 1  subsets  0.79 0.04    3.62</span>
<span class="co">#&gt; 2 controls  0.05 0.00    0.23</span>
<span class="co">#&gt; 3        y 19.72 0.90   89.82</span>
<span class="co">#&gt; 4        x  0.43 0.02    1.95</span>
<span class="co">#&gt; 5 Residual  0.96 0.04    4.38</span>

<span class="co"># Plot decomposition</span>
<span class="fu"><a href="../reference/plot_variance.html">plot_variance</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></pre></div>
<p><img src="specr_files/figure-html/unnamed-chunk-10-1.png" width="100%"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Philipp K. Masur, Michael Scharkow.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
