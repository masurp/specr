<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualizing specification curve analyses • specr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Visualizing specification curve analyses">
<meta property="og:description" content="specr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">specr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/specr.html">Getting started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Basics</li>
    <li>
      <a href="../articles/different-specifications.html">Setting up different types of specifications</a>
    </li>
    <li>
      <a href="../articles/custom-plot.html">Visualizing specification curve analyses</a>
    </li>
    <li>
      <a href="../articles/invest-spec.html">Investigating specific specifications</a>
    </li>
    <li>
      <a href="../articles/parallelization.html">Parallelization</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Incorporating specific models</li>
    <li>
      <a href="../articles/measurement_models.html">Structural equation models</a>
    </li>
    <li>
      <a href="../articles/random_effects.html">Multilevel models</a>
    </li>
    <li>
      <a href="../articles/bayesian-models.html">Bayesian Modeling</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/masurp/specr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Visualizing specification curve analyses</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/masurp/specr/blob/HEAD/vignettes/custom-plot.rmd" class="external-link"><code>vignettes/custom-plot.rmd</code></a></small>
      <div class="hidden name"><code>custom-plot.rmd</code></div>

    </div>

    
    
<p>This vignette exemplifies different ways to plot results from
specification curve analyses. Since version 0.3.0, running the function
<code><a href="../reference/specr.html">specr()</a></code> creates an object of class
<code>specr.object</code>, which can be investigated and plotted using
generic function (e.g., <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> and <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>.
For most cases, simply wrapping the function <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> around
the results will already create a comprehensive visualization. However,
more specific customization is possible if we use specify the argument
<code>type</code> (e.g., <code>type = "curve"</code>). Different types
are available. All of resulting plots are objects of the class <a href="https://ggplot2.tidyverse.org/index.html" class="external-link">ggplot</a>, which means
they can be customized and adjusted further using the grammar of
graphics provided by the package <a href="https://ggplot2.tidyverse.org/index.html" class="external-link">ggplot2</a>.
<code>specr</code> also exports the function <code><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid()</a></code>
from the package <code>cowplot</code>, which can be used to combine
different types of plots.</p>
<div class="section level2">
<h2 id="specification-curve-analysis">Specification curve analysis<a class="anchor" aria-label="anchor" href="#specification-curve-analysis"></a>
</h2>
<div class="section level3">
<h3 id="setting-up-specifications">Setting up specifications<a class="anchor" aria-label="anchor" href="#setting-up-specifications"></a>
</h3>
<p>In order to have some data to work with, we will use the example data
included in the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://masurp.github.io/specr/" class="external-link">specr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Setup specifications</span></span>
<span><span class="va">specs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup.html">setup</a></span><span class="op">(</span><span class="va">example_data</span>,</span>
<span>                     y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span><span class="op">)</span>,</span>
<span>                     x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>,</span>
<span>                     model <span class="op">=</span> <span class="st">"lm"</span>,</span>
<span>                     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group1</span><span class="op">)</span>,</span>
<span>                     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="va">group2</span><span class="op">)</span>,</span>
<span>                     controls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Summary of the specification setup</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">specs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Setup for the Specification Curve Analysis</span></span>
<span><span class="co">## -------------------------------------------</span></span>
<span><span class="co">## Class:                      specr.setup -- version: 0.3.0 </span></span>
<span><span class="co">## Number of specifications:   192 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Specifications:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Independent variable:     x1, x2 </span></span>
<span><span class="co">##   Dependent variable:       y1, y2 </span></span>
<span><span class="co">##   Models:                   lm </span></span>
<span><span class="co">##   Covariates:               no covariates, c1, c2, c1 + c2 </span></span>
<span><span class="co">##   Subsets analyses:         middle &amp; female, old &amp; female, young &amp; female, female, middle &amp; male, old &amp; male, young &amp; male, male, middle, old, young, all </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Function used to extract parameters:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   function (x) </span></span>
<span><span class="co">## broom::tidy(x, conf.int = TRUE)</span></span>
<span><span class="co">## &lt;environment: 0x7fec62d5d508&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Head of specifications table (first 6 rows):</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">##   x     y     model controls      subsets         group1 group2 formula    </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> x1    y1    lm    no covariates middle &amp; female middle female y1 ~ x1 + 1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> x1    y1    lm    no covariates old &amp; female    old    female y1 ~ x1 + 1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> x1    y1    lm    no covariates young &amp; female  young  female y1 ~ x1 + 1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> x1    y1    lm    no covariates female          <span style="color: #BB0000;">NA</span>     female y1 ~ x1 + 1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> x1    y1    lm    no covariates middle &amp; male   middle male   y1 ~ x1 + 1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> x1    y1    lm    no covariates old &amp; male      old    male   y1 ~ x1 + 1</span></span></code></pre>
<p>We can see that we will estimate 192 models.</p>
</div>
<div class="section level3">
<h3 id="fitting-the-models">Fitting the models<a class="anchor" aria-label="anchor" href="#fitting-the-models"></a>
</h3>
<p>Next, we fit the models across these 192 specifications. As this
example won’t take much time, we do not parallelize and stick to one
core (by setting <code>workers = 1</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Running specification curve analysis </span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/specr.html">specr</a></span><span class="op">(</span><span class="va">specs</span>, workers <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Models fitted based on 192 specifications</span></span>
<span><span class="co">## Number of cores used: 1 </span></span>
<span><span class="co">## 1.736 sec elapsed</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="investigating-the-results">Investigating the results<a class="anchor" aria-label="anchor" href="#investigating-the-results"></a>
</h3>
<p>Let’s quickly get some ideas about the specification curve by using
the generic <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Overall summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Results of the specification curve analysis</span></span>
<span><span class="co">## -------------------</span></span>
<span><span class="co">## Technical details:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Class:                          specr.object -- version: 0.3.0 </span></span>
<span><span class="co">##   Cores used:                     1 </span></span>
<span><span class="co">##   Duration of fitting process:    1.736 sec elapsed </span></span>
<span><span class="co">##   Number of specifications:       192 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Descriptive summary of the specification curve:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  median  mad   min  max   q25  q75</span></span>
<span><span class="co">##    0.13 0.45 -0.49 0.68 -0.16 0.44</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Descriptive summary of sample sizes: </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  median min  max</span></span>
<span><span class="co">##     250 160 1000</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Head of the specification results (first 6 rows): </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 26</span></span></span>
<span><span class="co">##   x     y     model controls    subsets group1 group2 formula estimate std.error</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> x1    y1    lm    no covaria… middle… middle female y1 ~ x…     0.6       0.1 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> x1    y1    lm    no covaria… old &amp; … old    female y1 ~ x…     0.65      0.08</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> x1    y1    lm    no covaria… young … young  female y1 ~ x…     0.48      0.08</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> x1    y1    lm    no covaria… female  <span style="color: #BB0000;">NA</span>     female y1 ~ x…     0.61      0.05</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> x1    y1    lm    no covaria… middle… middle male   y1 ~ x…     0.61      0.09</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> x1    y1    lm    no covaria… old &amp; … old    male   y1 ~ x…     0.68      0.1 </span></span>
<span><span class="co">## <span style="color: #949494;"># … with 16 more variables: statistic &lt;dbl&gt;, p.value &lt;dbl&gt;, conf.low &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   conf.high &lt;dbl&gt;, fit_r.squared &lt;dbl&gt;, fit_adj.r.squared &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   fit_sigma &lt;dbl&gt;, fit_statistic &lt;dbl&gt;, fit_p.value &lt;dbl&gt;, fit_df &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   fit_logLik &lt;dbl&gt;, fit_AIC &lt;dbl&gt;, fit_BIC &lt;dbl&gt;, fit_deviance &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   fit_df.residual &lt;dbl&gt;, fit_nobs &lt;dbl&gt;</span></span></span></code></pre>
<p>The median effect size is b = 0.13 (mad = 0.45). Sample sizes range
from 250 to 1000 (the full data set). We can also summarize different
aspects in more detail. For example, by add <code>type = "curve"</code>,
we are able to produce descriptive summaries of the multiverse of
parameters.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specific descriptive analysis of the curve, grouped by x and y</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">results</span>, </span>
<span>        type <span class="op">=</span> <span class="st">"curve"</span>, </span>
<span>        group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 9</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Groups:   x [2]</span></span></span>
<span><span class="co">##   x     y       median    mad    min    max     q25     q75   obs</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> x1    y1     0.605   0.044<span style="text-decoration: underline;">6</span>  0.446  0.678  0.589   0.638    250</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> x1    y2    -<span style="color: #BB0000;">0.272</span>   0.090<span style="text-decoration: underline;">5</span> -<span style="color: #BB0000;">0.490</span> -<span style="color: #BB0000;">0.124</span> -<span style="color: #BB0000;">0.314</span>  -<span style="color: #BB0000;">0.207</span>    250</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> x2    y1     0.229   0.065<span style="text-decoration: underline;">1</span>  0.107  0.438  0.193   0.276    250</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> x2    y2    -<span style="color: #BB0000;">0.005</span><span style="color: #BB0000; text-decoration: underline;">36</span> 0.115  -<span style="color: #BB0000;">0.204</span>  0.184 -<span style="color: #BB0000;">0.078</span><span style="color: #BB0000; text-decoration: underline;">4</span>  0.073<span style="text-decoration: underline;">1</span>   250</span></span></code></pre>
<p>We see that it makes quite a difference what variables are actually
used to estimate the relationship.</p>
</div>
</div>
<div class="section level2">
<h2 id="visualizations">Visualizations<a class="anchor" aria-label="anchor" href="#visualizations"></a>
</h2>
<p>The primary goal of this vignette is to provide some examples of how
these results - and specifically the specification curve - can be
visualized. Because received an object of class
<code>specr.object</code>, we can create most visualizations using the
generic <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function. Different plots can be created by
changing the argument <code>type</code> (e.g.,
<code>type = "boxplot"</code>).</p>
<div class="section level3">
<h3 id="comprehensive-standard-visualization">Comprehensive standard visualization<a class="anchor" aria-label="anchor" href="#comprehensive-standard-visualization"></a>
</h3>
<p>The simplest way to visualize most of the information contained in
the results data frame is by using the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function
without any further arguments specified. In the background, the function
is actually set to <code>type = "default"</code>, which creates both the
specification curve plot and the choice panel and combines them into a
larger figure.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom-plot_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>We can further customize that function, e.g., by removing unnecessary
information (in this case we only specified one model, plotting this
analytical choice is hence useless) or by reordering/transforming the
analytical choices (and thereby visualize specific contrasts).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Customizing plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, </span>
<span>     choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"controls"</span>, <span class="co"># model is not plotted</span></span>
<span>                 <span class="st">"group1"</span>, <span class="st">"group2"</span><span class="op">)</span>,  <span class="co"># subset split into original groups</span></span>
<span>     rel_heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.75</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>          <span class="co"># changing relative heights</span></span></code></pre></div>
<p><img src="custom-plot_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Investigating specific contrasts</span></span>
<span><span class="va">results</span><span class="op">$</span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">$</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"female"</span>, <span class="va">subsets</span><span class="op">)</span>, <span class="st">"female"</span>, </span>
<span>                         <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="va">subsets</span><span class="op">)</span>, <span class="st">"male"</span>, <span class="st">"all"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># New variable as "choice"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, </span>
<span>     choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"gender"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom-plot_files/figure-html/unnamed-chunk-6-2.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="more-advanced-customization">More advanced customization<a class="anchor" aria-label="anchor" href="#more-advanced-customization"></a>
</h3>
<div class="section level4">
<h4 id="plot-curve-and-choices-seperately">Plot curve and choices seperately<a class="anchor" aria-label="anchor" href="#plot-curve-and-choices-seperately"></a>
</h4>
<p>Using <code>plot(x, type = "default")</code> is not very flexible. It
is designed to provided a quick, but meaningful visualization that
covers the most important aspects of the analysis. Alternatively, we can
plot the specification curve and the choice panel individually and bind
them together afterwards. This is useful as it allows us to customize
and change both individual plots (using ggplot-functions!)</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot specification curve</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, </span>
<span>           type <span class="op">=</span> <span class="st">"curve"</span>,</span>
<span>           ci <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>           ribbon <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, </span>
<span>             linetype <span class="op">=</span> <span class="st">"dashed"</span>, </span>
<span>             color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">"unstd. coefficients"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot choices</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, </span>
<span>           type <span class="op">=</span> <span class="st">"choices"</span>,</span>
<span>           choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"controls"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"specifications (ranked)"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine plots (see ?plot_grid for possible adjustments)</span></span>
<span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>,</span>
<span>          ncol <span class="op">=</span> <span class="fl">1</span>,           </span>
<span>          align <span class="op">=</span> <span class="st">"v"</span>,             <span class="co"># to align vertically</span></span>
<span>          axis <span class="op">=</span> <span class="st">"rbl"</span>,            <span class="co"># align axes</span></span>
<span>          rel_heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>   <span class="co"># adjust relative heights</span></span></code></pre></div>
<p><img src="custom-plot_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
</div>
<div class="section level4">
<h4 id="include-sample-size-histogram">Include sample size histogram<a class="anchor" aria-label="anchor" href="#include-sample-size-histogram"></a>
</h4>
<p>By default, we do not know how many participants were included in
each specification. If you removed missing values listwise beforhand,
this may not be a big problem as all models are based on the same
subsample. If you have missing values in your dataset and you did not
impute them or delete them listwise, we should investigate how many
participants were included in each specification. Using
<code>plot(x, type = "samplesizes")</code>, we get a barplot that shows
the sample size per specification.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, type <span class="op">=</span> <span class="st">"samplesizes"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Add to overall plot</span></span>
<span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>, <span class="va">p3</span>,</span>
<span>          ncol <span class="op">=</span> <span class="fl">1</span>,</span>
<span>          align <span class="op">=</span> <span class="st">"v"</span>,</span>
<span>          axis <span class="op">=</span> <span class="st">"rbl"</span>,</span>
<span>          rel_heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">2</span>, <span class="fl">0.8</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom-plot_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
</div>
</div>
<div class="section level3">
<h3 id="alternative-way-to-visualize-specification-results">Alternative way to visualize specification results<a class="anchor" aria-label="anchor" href="#alternative-way-to-visualize-specification-results"></a>
</h3>
<p>Although the above created figure is by far the most used in studies
using specification curve analysis, there are alternative ways to
visualize the results. As the parameters resulting from the different
specifications are in fact a distribution of parameters, a box-n-whisker
plot (short “boxplot”) is a great alternative to investigate differences
in results contingent on analytical chocies. We simply have to use the
argument <code>type = "boxplot"</code> to create such plots.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ALl choices</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, </span>
<span>     type <span class="op">=</span> <span class="st">"boxplot"</span><span class="op">)</span> </span></code></pre></div>
<p><img src="custom-plot_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specific choices and further adjustments</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, </span>
<span>     type <span class="op">=</span> <span class="st">"boxplot"</span>, </span>
<span>     choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"controls"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom-plot_files/figure-html/unnamed-chunk-9-2.png" width="700"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, </span>
<span>     type <span class="op">=</span> <span class="st">"boxplot"</span>,</span>
<span>     choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"group1"</span>, <span class="st">"group2"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"steelblue"</span>, <span class="st">"darkred"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom-plot_files/figure-html/unnamed-chunk-9-3.png" width="700"></p>
<p>Bear in mind, however, that next to these generic functions, we can
always use the resulting data frame and plot our own figures.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">as_tibble</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">group1</span>, y <span class="op">=</span> <span class="va">estimate</span>, fill <span class="op">=</span> <span class="va">group2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Pastel1"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"age groups"</span>, fill <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom-plot_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Philipp K. Masur, Michael Scharkow.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
